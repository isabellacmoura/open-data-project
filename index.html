<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa Interativo - Dados Abertos em Portugal</title>

    <!-- JS do build Svelte -->
    <link rel="modulepreload" href="./_app/immutable/entry/start.DRcLa3vd.js">
    <link rel="modulepreload" href="./_app/immutable/chunks/Da2FXiEx.js">
    <link rel="modulepreload" href="./_app/immutable/chunks/Ar7RCcFa.js">
    <link rel="modulepreload" href="./_app/immutable/chunks/gEP5jy-j.js">
    <link rel="modulepreload" href="./_app/immutable/entry/app.D7bzbFYa.js">
    <link rel="modulepreload" href="./_app/immutable/chunks/DsnmJJEf.js">
    <link rel="modulepreload" href="./_app/immutable/chunks/DwxI3bpb.js">

    <!-- CSS do build Svelte -->
    <link rel="stylesheet" href="./_app/immutable/assets/0.bDzF2yEh.css">
    <link rel="stylesheet" href="./_app/immutable/assets/2.Bh1-V1Kf.css">

    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
        }
        
        #app {
            width: 100%;
            min-height: 100vh;
        }
        
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-size: 18px;
            color: #666;
        }
    </style>
</head>
<body>
    <!-- Loading inicial -->
    <div id="loading" class="loading">
        Carregando dados dos municípios portugueses...
    </div>

    <!-- Container para a app Svelte -->
    <div id="app" style="display: none;"></div>

    <!-- Inicialização da app Svelte -->
    <script type="module">
        const element = document.getElementById('app');
        const loading = document.getElementById('loading');

        Promise.all([
            import("./_app/immutable/entry/start.DRcLa3vd.js"),
            import("./_app/immutable/entry/app.D7bzbFYa.js")
        ]).then(([kit, App]) => {
            kit.start(App, element);
            // Esconde loading e mostra app
            loading.style.display = 'none';
            element.style.display = 'block';
        }).catch(error => {
            console.error('Erro ao carregar aplicação:', error);
            loading.innerHTML = 'Erro ao carregar a aplicação. Tente recarregar a página.';
        });
    </script>

    <!-- Carregamento dos dados CSV e GeoJSON via D3 -->
    <script type="module">
        import * as d3 from 'https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js';

        // Carrega dados dos municípios
        d3.csv("./municipios.csv").then(data => {
            console.log("Municipios carregados:", data.length, "registros");
            // Aqui você pode passar os dados para a aplicação Svelte
            window.municipiosData = data;
        }).catch(error => {
            console.error('Erro ao carregar CSV:', error);
        });

        // Carrega dados do GeoJSON
        d3.json("./PortugalM.geojson").then(data => {
            console.log("GeoJSON carregado:", data.features.length, "municípios");
            // Aqui você pode passar os dados para a aplicação Svelte
            window.geojsonData = data;
        }).catch(error => {
            console.error('Erro ao carregar GeoJSON:', error);
        });
    </script>

</body>
</html>